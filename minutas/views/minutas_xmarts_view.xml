<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="view_form_minutas" model="ir.ui.view">
        <field name="name">Minutas Form</field>
        <field name="model">minutas.xmarts</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button string="Enviar por correo" name="action_minuta_sent" type="object" class="oe_highlight" />
                    <button string="Enviar orden del día" name="action_orden_sent" type="object" class="oe_highlight" />
                    <field name="status" widget="statusbar"/>
                </header>
                <sheet string="Minutas">
                    <field name="company_id" invisible='1'/>
                    <group name="group0">
                        <group name="group_left">
                            <field name="objetivo"/>
                            <field name="fecha_hora"/>
                            <field name="hora_fin"/>
                        </group>
                        <group name="group_right">
                            <field name="proyecto"/>
                            <separator/>
                            <field name="hito" widget="many2many_tags"/>
                        </group>
                    </group>
                    <group name="group1">
                        <group name="groupl1">
                            <field name="virtual"/>
                            <field name="ubicaciones_virtuales"
                                attrs="{'invisible':[('virtual', '=', False)]}"/>
                            <field name="link_reunion"
                                attrs="{'invisible':[('virtual', '=', False)]}"/>
                            <label for="reunion" string="Lugar de reunión"
                                attrs="{'invisible':[('virtual', '=', True)]}"/>
                            <div class="o_address_format" cols="2"
                                attrs="{'invisible':[('virtual', '=', True)]}">
                                <field name="reunion"/><br/>
                                <field name="referencia"/>
                            </div>
                        </group>
                        <!-- <group name="groupr1">
                            <label for="proxima_reunion" string="Lugar de próxima reunión"/>
                            <div class="o_address_format" cols="2">
                                <field name="proxima_reunion"/><br/>
                                <field name="referencia2"/>
                            </div>
                        </group> -->
                    </group>
                    <group name="group2">
                        <group name="groupl2">
                            <field name="fecha_proxima_reunion"/>
                        </group>
                        <!-- <group name="groupr2">
                            <field name="fin_proxima_reunion"/>
                        </group> -->
                    </group>
                    <notebook>
                        <page name="asistencia" string="Asistentes Internos:">
                            <field name="asistenciain_lines" widget="one2many_list">
                                <tree editable="bottom">
                                    <field name="name"/>
                                    <field name="puesto"/>
                                    <field name="email"/>
                                    <field name="minuta" type="checkbox"/>
                                </tree>
                            </field>
                        </page>
                        <page name="asistencia" string="Asistentes Externos:">
                            <field name="asistencia_lines" widget="one2many_list">
                                <tree editable="bottom">
                                    <field name="name"/>
                                    <field name="empresa"/>
                                    <field name="puesto"/>
                                    <field name="email"/>
                                    <field name="minuta" type="checkbox"/>
                                </tree>
                            </field>
                        </page>
                        <page name="actividades" string="Actividades realizadas:">
                            <field name="activids_lines" widget="one2many_list">
                                <tree editable="bottom">
                                    <field name="name" domain="[('project_id', '=', parent.proyecto)]"/>
                                    <button type="object" string="Registrar horas" name="action_set_horas"/>
                                    <field name="asignado"/>
                                    <field name="limite"/>
                                    <field name="etapa"/>
                                    <field name="observaciones"/>
                                </tree>
                            </field>
                        </page>
                        <page name="compromisos" string="Compromisos:">
                            <field name="compromisos_lines" widget="one2many_list">
                                <tree editable="bottom">
                                    <field name="name" domain="[('project_id', '=', parent.proyecto)]"/>
                                    <field name="asignado"/>
                                    <field name="limite"/>
                                    <field name="etapa"/>
                                    <field name="observaciones"/>
                                </tree>
                            </field>
                        </page>
                        <page name="actividades" string="Actividades extra:">
                            <field name="actividades_lines" widget="one2many_list">
                                <tree editable="bottom">
                                    <field name="name"/>
                                    <field name="status"/>
                                </tree>
                            </field>
                        </page>
                        <page name="firmas" string="Firmas:">
                            <group name="group3">                                        
                               <!-- <group name="groupasig">
                                    <field name="client" widget="signature"/>
                                </group>
                                <group name="groupasig2">
                                    <field name="consul" widget="signature"/>
                                </group> -->
                            </group>                                   
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                    <field name="message_ids" widget="mail_thread"/>
                    <field name="activity_ids"/>
                </div>
            </form>
        </field>
    </record>
    <record id="view_tree_minutas_xmarts" model="ir.ui.view">
        <field name="name">Minutas Tree</field>
        <field name="model">minutas.xmarts</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" />
                <field name="proyecto" />
                <field name="objetivo" />
                <field name="status" />
                <field name="fecha_hora" />
                <field name="hora_fin"/>
            </tree>
        </field>
    </record>

    <record id="view_pivot_minutas_xmarts" model="ir.ui.view">
        <field name="name">Minutas Pivot</field>
        <field name="model">minutas.xmarts</field>
        <field name="arch" type="xml">
            <pivot string="Invoices Analysis" sample="1">
                <field name="name" type="col"/>
            </pivot>
        </field>
    </record>

    <record id="view_xmarts_minutas_kanban" model="ir.ui.view">
        <field name="name">minutas.kanban</field>
        <field name="model">minutas.xmarts</field>
        <field name="arch" type="xml">
            <kanban sample="1">
                <field name="name"/>
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_card oe_kanban_global_click">
                            <div class="o_kanban_card_header_title mb16">
                                <div class="o_primary">
                                    <strong><t t-esc="record.name.value"/></strong>
                                </div>
                            </div>
                            <div class="o_kanban_manage_button_section">
                                <a class="o_kanban_manage_toggle_button" href="#"><i class="fa fa-ellipsis-v" role="img" aria-label="Manage" title="Manage"/></a>
                            </div>
                            <div class="container o_kanban_card_content">
                                <div class="row">
                                    <div class="col-6 o_kanban_primary_left">
                                        <div class="row">
                                            <div class="col-6">
                                                <strong><span>Inicio:</span></strong>
                                            </div>
                                            <div class="col-6">
                                                <span><field name="fecha_hora"/></span>
                                            </div>
                                        </div>
                                        <br/>
                                        <div class="row">
                                            <div class="col-6">
                                                <strong><span>Fin:</span></strong>
                                            </div>
                                            <div class="col-6">
                                                <span><field name="hora_fin"/></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6 o_kanban_primary_right">
        
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <record id="minutas_xmarts_calendar_view" model="ir.ui.view">
        <field name="name">minutas.xmarts.calendar</field>
        <field name="model">minutas.xmarts</field>
        <field name="arch" type="xml">
            <calendar string="Minutas" date_start="fecha_hora" date_stop="hora_fin" event_limit="5" quick_add="False">
                <field name="name"/>
                <field name="proyecto" filters="1"/>
                <field name="objetivo"/>
            </calendar>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_minutas_xmarts">
        <field name="name">Minutas</field>
        <field name="res_model">minutas.xmarts</field>
        <field name="view_mode">kanban,tree,form,pivot,calendar</field>
    </record>

    <menuitem
        id="menu_minutas_xmarts"
        name="Minutas"
        sequence="20"
        parent="project.menu_main_pm"
    />
    <menuitem
        id="menu_minutas_xmarts_minutas"
        name="Minutas"
        sequence="28"
        action="action_minutas_xmarts"
        parent="menu_minutas_xmarts"
    />
    <menuitem
        id="menu_mis_minutas_xmarts_minutas"
        name="Mis Minutas"
        sequence="29"
        action="action_my_minutas_xmarts"
        parent="menu_minutas_xmarts"
    />
    <menuitem
        id="menu_minutas_xmarts_config"
        name="Configuracion"
        sequence="30"
        parent="menu_minutas_xmarts"
    />
    
</odoo>
